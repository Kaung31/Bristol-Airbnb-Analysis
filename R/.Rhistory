# ---- 1) Connect to SQLite ----
db_path <- "D:/Bristol_AIRBNB/bristol_airbnb.db"
cat("Exports written to /exports. Load them in Tableau.\n")
con <- dbConnect(SQLite(), db_path)
# ---- 1) Connect to SQLite ----
db_path <- "D:/Bristol_AIRBNB/bristol_airbnb.db"
con <- dbConnect(SQLite(), db_path)
library(ggplot2)
con <- dbConnect(SQLite(), db_path)
# ---- 2) Pull data from your clean tables / views ----
# If you ran 05_views.sql, these views should exist:
price_nbhd_room <- dbGetQuery(con, "
SELECT neighbourhood, room_type, avg_price, listings_with_price
FROM v_price_by_nbhd_room
")
library(dplyr)
cat("Files:\n",
"- price_by_nbhd_room.csv\n",
"- price_by_neighbourhood.csv\n",
"- reviews_monthly.csv\n",
"- price_summary_median_p90.csv\n",
"- listings_for_map.csv\n")
cat("✅ Exports written to:", export_path, "\n")
# ---- 5) Done ----
dbDisconnect(con)
cat("✅ Exports written to:", export_path, "\n")
# ===== analysis_fixed.R =====
# Load packages
library(DBI)
library(RSQLite)
cat("✅ Exports written to:", export_path, "\n")
cat("✅ Exports written to:", export_path, "\n")
cat("✅ Exports written to:", export_path, "\n")
cat("✅ Exports written to:", export_path, "\n")
cat("✅ Exports written to:", export_path, "\n")
source("D:/Bristol_AIRBNB/R/analysis.R")
listings_for_map <- dbGetQuery(con, "
SELECT id, neighbourhood, room_type, latitude, longitude, price, number_of_reviews
FROM listings_clean
WHERE latitude IS NOT NULL AND longitude IS NOT NULL
")
source("D:/Bristol_AIRBNB/R/analysis.R")
source("D:/Bristol_AIRBNB/R/analysis.R")
